{"ast":null,"code":"import { extends as _extends, objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport React, { useReducer, createRef, useMemo, createContext, useCallback, useRef, useContext, Fragment } from 'react';\nimport { match } from '../../utils/match.esm.js';\nimport { render, forwardRefWithAs, Features } from '../../utils/render.esm.js';\nimport { useSyncRefs } from '../../hooks/use-sync-refs.esm.js';\nimport { Keys } from '../keyboard.esm.js';\nimport { isDisabledReactIssue7711 } from '../../utils/bugs.esm.js';\nimport { useIsoMorphicEffect } from '../../hooks/use-iso-morphic-effect.esm.js';\nimport { useId } from '../../hooks/use-id.esm.js';\nimport { isFocusableElement, FocusableMode } from '../../utils/focus-management.esm.js';\nimport { useWindowEvent } from '../../hooks/use-window-event.esm.js';\nimport { OpenClosedProvider, State, useOpenClosed } from '../../internal/open-closed.esm.js';\nimport { useResolveButtonType } from '../../hooks/use-resolve-button-type.esm.js';\nimport { disposables } from '../../utils/disposables.esm.js';\nimport { useDisposables } from '../../hooks/use-disposables.esm.js';\nimport { useComputed } from '../../hooks/use-computed.esm.js';\nimport { calculateActiveIndex, Focus } from '../../utils/calculate-active-index.esm.js';\n\nvar _reducers;\n\nvar ListboxStates;\n\n(function (ListboxStates) {\n  ListboxStates[ListboxStates[\"Open\"] = 0] = \"Open\";\n  ListboxStates[ListboxStates[\"Closed\"] = 1] = \"Closed\";\n})(ListboxStates || (ListboxStates = {}));\n\nvar ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[ActionTypes[\"OpenListbox\"] = 0] = \"OpenListbox\";\n  ActionTypes[ActionTypes[\"CloseListbox\"] = 1] = \"CloseListbox\";\n  ActionTypes[ActionTypes[\"SetDisabled\"] = 2] = \"SetDisabled\";\n  ActionTypes[ActionTypes[\"SetOrientation\"] = 3] = \"SetOrientation\";\n  ActionTypes[ActionTypes[\"GoToOption\"] = 4] = \"GoToOption\";\n  ActionTypes[ActionTypes[\"Search\"] = 5] = \"Search\";\n  ActionTypes[ActionTypes[\"ClearSearch\"] = 6] = \"ClearSearch\";\n  ActionTypes[ActionTypes[\"RegisterOption\"] = 7] = \"RegisterOption\";\n  ActionTypes[ActionTypes[\"UnregisterOption\"] = 8] = \"UnregisterOption\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar reducers = (_reducers = {}, _reducers[ActionTypes.CloseListbox] = function (state) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Closed) return state;\n  return _extends({}, state, {\n    activeOptionIndex: null,\n    listboxState: ListboxStates.Closed\n  });\n}, _reducers[ActionTypes.OpenListbox] = function (state) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Open) return state;\n  return _extends({}, state, {\n    listboxState: ListboxStates.Open\n  });\n}, _reducers[ActionTypes.SetDisabled] = function (state, action) {\n  if (state.disabled === action.disabled) return state;\n  return _extends({}, state, {\n    disabled: action.disabled\n  });\n}, _reducers[ActionTypes.SetOrientation] = function (state, action) {\n  if (state.orientation === action.orientation) return state;\n  return _extends({}, state, {\n    orientation: action.orientation\n  });\n}, _reducers[ActionTypes.GoToOption] = function (state, action) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Closed) return state;\n  var activeOptionIndex = calculateActiveIndex(action, {\n    resolveItems: function resolveItems() {\n      return state.options;\n    },\n    resolveActiveIndex: function resolveActiveIndex() {\n      return state.activeOptionIndex;\n    },\n    resolveId: function resolveId(item) {\n      return item.id;\n    },\n    resolveDisabled: function resolveDisabled(item) {\n      return item.dataRef.current.disabled;\n    }\n  });\n  if (state.searchQuery === '' && state.activeOptionIndex === activeOptionIndex) return state;\n  return _extends({}, state, {\n    searchQuery: '',\n    activeOptionIndex: activeOptionIndex\n  });\n}, _reducers[ActionTypes.Search] = function (state, action) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Closed) return state;\n  var searchQuery = state.searchQuery + action.value.toLowerCase();\n  var match = state.options.findIndex(function (option) {\n    var _option$dataRef$curre;\n\n    return !option.dataRef.current.disabled && ((_option$dataRef$curre = option.dataRef.current.textValue) == null ? void 0 : _option$dataRef$curre.startsWith(searchQuery));\n  });\n  if (match === -1 || match === state.activeOptionIndex) return _extends({}, state, {\n    searchQuery: searchQuery\n  });\n  return _extends({}, state, {\n    searchQuery: searchQuery,\n    activeOptionIndex: match\n  });\n}, _reducers[ActionTypes.ClearSearch] = function (state) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Closed) return state;\n  if (state.searchQuery === '') return state;\n  return _extends({}, state, {\n    searchQuery: ''\n  });\n}, _reducers[ActionTypes.RegisterOption] = function (state, action) {\n  return _extends({}, state, {\n    options: [].concat(state.options, [{\n      id: action.id,\n      dataRef: action.dataRef\n    }])\n  });\n}, _reducers[ActionTypes.UnregisterOption] = function (state, action) {\n  var nextOptions = state.options.slice();\n  var currentActiveOption = state.activeOptionIndex !== null ? nextOptions[state.activeOptionIndex] : null;\n  var idx = nextOptions.findIndex(function (a) {\n    return a.id === action.id;\n  });\n  if (idx !== -1) nextOptions.splice(idx, 1);\n  return _extends({}, state, {\n    options: nextOptions,\n    activeOptionIndex: function () {\n      if (idx === state.activeOptionIndex) return null;\n      if (currentActiveOption === null) return null; // If we removed the option before the actual active index, then it would be out of sync. To\n      // fix this, we will find the correct (new) index position.\n\n      return nextOptions.indexOf(currentActiveOption);\n    }()\n  });\n}, _reducers);\nvar ListboxContext = /*#__PURE__*/createContext(null);\nListboxContext.displayName = 'ListboxContext';\n\nfunction useListboxContext(component) {\n  var context = useContext(ListboxContext);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <\" + Listbox.name + \" /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useListboxContext);\n    throw err;\n  }\n\n  return context;\n}\n\nfunction stateReducer(state, action) {\n  return match(action.type, reducers, state, action);\n} // ---\n\n\nvar DEFAULT_LISTBOX_TAG = Fragment;\n\nfunction Listbox(props) {\n  var _match;\n\n  var value = props.value,\n      onChange = props.onChange,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$horizontal = props.horizontal,\n      horizontal = _props$horizontal === void 0 ? false : _props$horizontal,\n      passThroughProps = _objectWithoutPropertiesLoose(props, [\"value\", \"onChange\", \"disabled\", \"horizontal\"]);\n\n  var orientation = horizontal ? 'horizontal' : 'vertical';\n  var reducerBag = useReducer(stateReducer, {\n    listboxState: ListboxStates.Closed,\n    propsRef: {\n      current: {\n        value: value,\n        onChange: onChange\n      }\n    },\n    labelRef: createRef(),\n    buttonRef: createRef(),\n    optionsRef: createRef(),\n    disabled: disabled,\n    orientation: orientation,\n    options: [],\n    searchQuery: '',\n    activeOptionIndex: null\n  });\n  var _reducerBag$ = reducerBag[0],\n      listboxState = _reducerBag$.listboxState,\n      propsRef = _reducerBag$.propsRef,\n      optionsRef = _reducerBag$.optionsRef,\n      buttonRef = _reducerBag$.buttonRef,\n      dispatch = reducerBag[1];\n  useIsoMorphicEffect(function () {\n    propsRef.current.value = value;\n  }, [value, propsRef]);\n  useIsoMorphicEffect(function () {\n    propsRef.current.onChange = onChange;\n  }, [onChange, propsRef]);\n  useIsoMorphicEffect(function () {\n    return dispatch({\n      type: ActionTypes.SetDisabled,\n      disabled: disabled\n    });\n  }, [disabled]);\n  useIsoMorphicEffect(function () {\n    return dispatch({\n      type: ActionTypes.SetOrientation,\n      orientation: orientation\n    });\n  }, [orientation]); // Handle outside click\n\n  useWindowEvent('mousedown', function (event) {\n    var _buttonRef$current, _optionsRef$current;\n\n    var target = event.target;\n    if (listboxState !== ListboxStates.Open) return;\n    if ((_buttonRef$current = buttonRef.current) == null ? void 0 : _buttonRef$current.contains(target)) return;\n    if ((_optionsRef$current = optionsRef.current) == null ? void 0 : _optionsRef$current.contains(target)) return;\n    dispatch({\n      type: ActionTypes.CloseListbox\n    });\n\n    if (!isFocusableElement(target, FocusableMode.Loose)) {\n      var _buttonRef$current2;\n\n      event.preventDefault();\n      (_buttonRef$current2 = buttonRef.current) == null ? void 0 : _buttonRef$current2.focus();\n    }\n  });\n  var slot = useMemo(function () {\n    return {\n      open: listboxState === ListboxStates.Open,\n      disabled: disabled\n    };\n  }, [listboxState, disabled]);\n  return React.createElement(ListboxContext.Provider, {\n    value: reducerBag\n  }, React.createElement(OpenClosedProvider, {\n    value: match(listboxState, (_match = {}, _match[ListboxStates.Open] = State.Open, _match[ListboxStates.Closed] = State.Closed, _match))\n  }, render({\n    props: passThroughProps,\n    slot: slot,\n    defaultTag: DEFAULT_LISTBOX_TAG,\n    name: 'Listbox'\n  })));\n} // ---\n\n\nvar DEFAULT_BUTTON_TAG = 'button';\nvar Button = /*#__PURE__*/forwardRefWithAs(function Button(props, ref) {\n  var _state$optionsRef$cur;\n\n  var _useListboxContext = useListboxContext([Listbox.name, Button.name].join('.')),\n      state = _useListboxContext[0],\n      dispatch = _useListboxContext[1];\n\n  var buttonRef = useSyncRefs(state.buttonRef, ref);\n  var id = \"headlessui-listbox-button-\" + useId();\n  var d = useDisposables();\n  var handleKeyDown = useCallback(function (event) {\n    switch (event.key) {\n      // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-13\n      case Keys.Space:\n      case Keys.Enter:\n      case Keys.ArrowDown:\n        event.preventDefault();\n        dispatch({\n          type: ActionTypes.OpenListbox\n        });\n        d.nextFrame(function () {\n          if (!state.propsRef.current.value) dispatch({\n            type: ActionTypes.GoToOption,\n            focus: Focus.First\n          });\n        });\n        break;\n\n      case Keys.ArrowUp:\n        event.preventDefault();\n        dispatch({\n          type: ActionTypes.OpenListbox\n        });\n        d.nextFrame(function () {\n          if (!state.propsRef.current.value) dispatch({\n            type: ActionTypes.GoToOption,\n            focus: Focus.Last\n          });\n        });\n        break;\n    }\n  }, [dispatch, state, d]);\n  var handleKeyUp = useCallback(function (event) {\n    switch (event.key) {\n      case Keys.Space:\n        // Required for firefox, event.preventDefault() in handleKeyDown for\n        // the Space key doesn't cancel the handleKeyUp, which in turn\n        // triggers a *click*.\n        event.preventDefault();\n        break;\n    }\n  }, []);\n  var handleClick = useCallback(function (event) {\n    if (isDisabledReactIssue7711(event.currentTarget)) return event.preventDefault();\n\n    if (state.listboxState === ListboxStates.Open) {\n      dispatch({\n        type: ActionTypes.CloseListbox\n      });\n      d.nextFrame(function () {\n        var _state$buttonRef$curr;\n\n        return (_state$buttonRef$curr = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr.focus({\n          preventScroll: true\n        });\n      });\n    } else {\n      event.preventDefault();\n      dispatch({\n        type: ActionTypes.OpenListbox\n      });\n    }\n  }, [dispatch, d, state]);\n  var labelledby = useComputed(function () {\n    if (!state.labelRef.current) return undefined;\n    return [state.labelRef.current.id, id].join(' ');\n  }, [state.labelRef.current, id]);\n  var slot = useMemo(function () {\n    return {\n      open: state.listboxState === ListboxStates.Open,\n      disabled: state.disabled\n    };\n  }, [state]);\n  var passthroughProps = props;\n  var propsWeControl = {\n    ref: buttonRef,\n    id: id,\n    type: useResolveButtonType(props, state.buttonRef),\n    'aria-haspopup': true,\n    'aria-controls': (_state$optionsRef$cur = state.optionsRef.current) == null ? void 0 : _state$optionsRef$cur.id,\n    'aria-expanded': state.disabled ? undefined : state.listboxState === ListboxStates.Open,\n    'aria-labelledby': labelledby,\n    disabled: state.disabled,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    onClick: handleClick\n  };\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_BUTTON_TAG,\n    name: 'Listbox.Button'\n  });\n}); // ---\n\nvar DEFAULT_LABEL_TAG = 'label';\n\nfunction Label(props) {\n  var _useListboxContext2 = useListboxContext([Listbox.name, Label.name].join('.')),\n      state = _useListboxContext2[0];\n\n  var id = \"headlessui-listbox-label-\" + useId();\n  var handleClick = useCallback(function () {\n    var _state$buttonRef$curr2;\n\n    return (_state$buttonRef$curr2 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr2.focus({\n      preventScroll: true\n    });\n  }, [state.buttonRef]);\n  var slot = useMemo(function () {\n    return {\n      open: state.listboxState === ListboxStates.Open,\n      disabled: state.disabled\n    };\n  }, [state]);\n  var propsWeControl = {\n    ref: state.labelRef,\n    id: id,\n    onClick: handleClick\n  };\n  return render({\n    props: _extends({}, props, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_LABEL_TAG,\n    name: 'Listbox.Label'\n  });\n} // ---\n\n\nvar DEFAULT_OPTIONS_TAG = 'ul';\nvar OptionsRenderFeatures = Features.RenderStrategy | Features.Static;\nvar Options = /*#__PURE__*/forwardRefWithAs(function Options(props, ref) {\n  var _state$options$state$;\n\n  var _useListboxContext3 = useListboxContext([Listbox.name, Options.name].join('.')),\n      state = _useListboxContext3[0],\n      dispatch = _useListboxContext3[1];\n\n  var optionsRef = useSyncRefs(state.optionsRef, ref);\n  var id = \"headlessui-listbox-options-\" + useId();\n  var d = useDisposables();\n  var searchDisposables = useDisposables();\n  var usesOpenClosedState = useOpenClosed();\n\n  var visible = function () {\n    if (usesOpenClosedState !== null) {\n      return usesOpenClosedState === State.Open;\n    }\n\n    return state.listboxState === ListboxStates.Open;\n  }();\n\n  useIsoMorphicEffect(function () {\n    var container = state.optionsRef.current;\n    if (!container) return;\n    if (state.listboxState !== ListboxStates.Open) return;\n    if (container === document.activeElement) return;\n    container.focus({\n      preventScroll: true\n    });\n  }, [state.listboxState, state.optionsRef]);\n  var handleKeyDown = useCallback(function (event) {\n    searchDisposables.dispose();\n\n    switch (event.key) {\n      // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-12\n      // @ts-expect-error Fallthrough is expected here\n      case Keys.Space:\n        if (state.searchQuery !== '') {\n          event.preventDefault();\n          event.stopPropagation();\n          return dispatch({\n            type: ActionTypes.Search,\n            value: event.key\n          });\n        }\n\n      // When in type ahead mode, fallthrough\n\n      case Keys.Enter:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.CloseListbox\n        });\n\n        if (state.activeOptionIndex !== null) {\n          var dataRef = state.options[state.activeOptionIndex].dataRef;\n          state.propsRef.current.onChange(dataRef.current.value);\n        }\n\n        disposables().nextFrame(function () {\n          var _state$buttonRef$curr3;\n\n          return (_state$buttonRef$curr3 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr3.focus({\n            preventScroll: true\n          });\n        });\n        break;\n\n      case match(state.orientation, {\n        vertical: Keys.ArrowDown,\n        horizontal: Keys.ArrowRight\n      }):\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToOption,\n          focus: Focus.Next\n        });\n\n      case match(state.orientation, {\n        vertical: Keys.ArrowUp,\n        horizontal: Keys.ArrowLeft\n      }):\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToOption,\n          focus: Focus.Previous\n        });\n\n      case Keys.Home:\n      case Keys.PageUp:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToOption,\n          focus: Focus.First\n        });\n\n      case Keys.End:\n      case Keys.PageDown:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToOption,\n          focus: Focus.Last\n        });\n\n      case Keys.Escape:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.CloseListbox\n        });\n        return d.nextFrame(function () {\n          var _state$buttonRef$curr4;\n\n          return (_state$buttonRef$curr4 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr4.focus({\n            preventScroll: true\n          });\n        });\n\n      case Keys.Tab:\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n\n      default:\n        if (event.key.length === 1) {\n          dispatch({\n            type: ActionTypes.Search,\n            value: event.key\n          });\n          searchDisposables.setTimeout(function () {\n            return dispatch({\n              type: ActionTypes.ClearSearch\n            });\n          }, 350);\n        }\n\n        break;\n    }\n  }, [d, dispatch, searchDisposables, state]);\n  var labelledby = useComputed(function () {\n    var _state$labelRef$curre, _state$labelRef$curre2, _state$buttonRef$curr5;\n\n    return (_state$labelRef$curre = (_state$labelRef$curre2 = state.labelRef.current) == null ? void 0 : _state$labelRef$curre2.id) != null ? _state$labelRef$curre : (_state$buttonRef$curr5 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr5.id;\n  }, [state.labelRef.current, state.buttonRef.current]);\n  var slot = useMemo(function () {\n    return {\n      open: state.listboxState === ListboxStates.Open\n    };\n  }, [state]);\n  var propsWeControl = {\n    'aria-activedescendant': state.activeOptionIndex === null ? undefined : (_state$options$state$ = state.options[state.activeOptionIndex]) == null ? void 0 : _state$options$state$.id,\n    'aria-labelledby': labelledby,\n    'aria-orientation': state.orientation,\n    id: id,\n    onKeyDown: handleKeyDown,\n    role: 'listbox',\n    tabIndex: 0,\n    ref: optionsRef\n  };\n  var passthroughProps = props;\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_OPTIONS_TAG,\n    features: OptionsRenderFeatures,\n    visible: visible,\n    name: 'Listbox.Options'\n  });\n}); // ---\n\nvar DEFAULT_OPTION_TAG = 'li';\n\nfunction Option(props) {\n  var _props$disabled2 = props.disabled,\n      disabled = _props$disabled2 === void 0 ? false : _props$disabled2,\n      value = props.value,\n      passthroughProps = _objectWithoutPropertiesLoose(props, [\"disabled\", \"value\"]);\n\n  var _useListboxContext4 = useListboxContext([Listbox.name, Option.name].join('.')),\n      state = _useListboxContext4[0],\n      dispatch = _useListboxContext4[1];\n\n  var id = \"headlessui-listbox-option-\" + useId();\n  var active = state.activeOptionIndex !== null ? state.options[state.activeOptionIndex].id === id : false;\n  var selected = state.propsRef.current.value === value;\n  var bag = useRef({\n    disabled: disabled,\n    value: value\n  });\n  useIsoMorphicEffect(function () {\n    bag.current.disabled = disabled;\n  }, [bag, disabled]);\n  useIsoMorphicEffect(function () {\n    bag.current.value = value;\n  }, [bag, value]);\n  useIsoMorphicEffect(function () {\n    var _document$getElementB, _document$getElementB2;\n\n    bag.current.textValue = (_document$getElementB = document.getElementById(id)) == null ? void 0 : (_document$getElementB2 = _document$getElementB.textContent) == null ? void 0 : _document$getElementB2.toLowerCase();\n  }, [bag, id]);\n  var select = useCallback(function () {\n    return state.propsRef.current.onChange(value);\n  }, [state.propsRef, value]);\n  useIsoMorphicEffect(function () {\n    dispatch({\n      type: ActionTypes.RegisterOption,\n      id: id,\n      dataRef: bag\n    });\n    return function () {\n      return dispatch({\n        type: ActionTypes.UnregisterOption,\n        id: id\n      });\n    };\n  }, [bag, id]);\n  useIsoMorphicEffect(function () {\n    var _document$getElementB3;\n\n    if (state.listboxState !== ListboxStates.Open) return;\n    if (!selected) return;\n    dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Specific,\n      id: id\n    });\n    (_document$getElementB3 = document.getElementById(id)) == null ? void 0 : _document$getElementB3.focus == null ? void 0 : _document$getElementB3.focus();\n  }, [state.listboxState]);\n  useIsoMorphicEffect(function () {\n    if (state.listboxState !== ListboxStates.Open) return;\n    if (!active) return;\n    var d = disposables();\n    d.nextFrame(function () {\n      var _document$getElementB4;\n\n      return (_document$getElementB4 = document.getElementById(id)) == null ? void 0 : _document$getElementB4.scrollIntoView == null ? void 0 : _document$getElementB4.scrollIntoView({\n        block: 'nearest'\n      });\n    });\n    return d.dispose;\n  }, [id, active, state.listboxState]);\n  var handleClick = useCallback(function (event) {\n    if (disabled) return event.preventDefault();\n    select();\n    dispatch({\n      type: ActionTypes.CloseListbox\n    });\n    disposables().nextFrame(function () {\n      var _state$buttonRef$curr6;\n\n      return (_state$buttonRef$curr6 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr6.focus({\n        preventScroll: true\n      });\n    });\n  }, [dispatch, state.buttonRef, disabled, select]);\n  var handleFocus = useCallback(function () {\n    if (disabled) return dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Nothing\n    });\n    dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Specific,\n      id: id\n    });\n  }, [disabled, id, dispatch]);\n  var handleMove = useCallback(function () {\n    if (disabled) return;\n    if (active) return;\n    dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Specific,\n      id: id\n    });\n  }, [disabled, active, id, dispatch]);\n  var handleLeave = useCallback(function () {\n    if (disabled) return;\n    if (!active) return;\n    dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Nothing\n    });\n  }, [disabled, active, dispatch]);\n  var slot = useMemo(function () {\n    return {\n      active: active,\n      selected: selected,\n      disabled: disabled\n    };\n  }, [active, selected, disabled]);\n  var propsWeControl = {\n    id: id,\n    role: 'option',\n    tabIndex: disabled === true ? undefined : -1,\n    'aria-disabled': disabled === true ? true : undefined,\n    'aria-selected': selected === true ? true : undefined,\n    disabled: undefined,\n    onClick: handleClick,\n    onFocus: handleFocus,\n    onPointerMove: handleMove,\n    onMouseMove: handleMove,\n    onPointerLeave: handleLeave,\n    onMouseLeave: handleLeave\n  };\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_OPTION_TAG,\n    name: 'Listbox.Option'\n  });\n} // ---\n\n\nListbox.Button = Button;\nListbox.Label = Label;\nListbox.Options = Options;\nListbox.Option = Option;\nexport { Listbox };","map":{"version":3,"mappings":"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","names":["extends","_extends","objectWithoutPropertiesLoose","_objectWithoutPropertiesLoose","React","useReducer","createRef","useMemo","createContext","useCallback","useRef","useContext","Fragment","match","render","forwardRefWithAs","Features","useSyncRefs","Keys","isDisabledReactIssue7711","useIsoMorphicEffect","useId","isFocusableElement","FocusableMode","useWindowEvent","OpenClosedProvider","State","useOpenClosed","useResolveButtonType","disposables","useDisposables","useComputed","calculateActiveIndex","Focus","_reducers","ListboxStates","ActionTypes","reducers","CloseListbox","state","disabled","listboxState","Closed","activeOptionIndex","OpenListbox","Open","SetDisabled","action","SetOrientation","orientation","GoToOption","resolveItems","options","resolveActiveIndex","resolveId","item","id","resolveDisabled","dataRef","current","searchQuery","Search","value","toLowerCase","findIndex","option","_option$dataRef$curre","textValue","startsWith","ClearSearch","RegisterOption","concat","UnregisterOption","nextOptions","slice","currentActiveOption","idx","a","splice","indexOf","ListboxContext","displayName","useListboxContext","component","context","err","Error","Listbox","name","captureStackTrace","stateReducer","type","DEFAULT_LISTBOX_TAG","props","_match","onChange","_props$disabled","_props$horizontal","horizontal","passThroughProps","reducerBag","propsRef","labelRef","buttonRef","optionsRef","_reducerBag$","dispatch","event","_buttonRef$current","_optionsRef$current","target","contains","Loose","_buttonRef$current2","preventDefault","focus","slot","open","createElement","Provider","defaultTag","DEFAULT_BUTTON_TAG","Button","ref","_state$optionsRef$cur","_useListboxContext","join","d","handleKeyDown","key","Space","Enter","ArrowDown","nextFrame","First","ArrowUp","Last","handleKeyUp","handleClick","currentTarget","_state$buttonRef$curr","preventScroll","labelledby","undefined","passthroughProps","propsWeControl","onKeyDown","onKeyUp","onClick","DEFAULT_LABEL_TAG","Label","_useListboxContext2","_state$buttonRef$curr2","DEFAULT_OPTIONS_TAG","OptionsRenderFeatures","RenderStrategy","Static","Options","_state$options$state$","_useListboxContext3","searchDisposables","usesOpenClosedState","visible","container","document","activeElement","dispose","stopPropagation","_state$buttonRef$curr3","vertical","ArrowRight","Next","ArrowLeft","Previous","Home","PageUp","End","PageDown","Escape","_state$buttonRef$curr4","Tab","length","setTimeout","_state$labelRef$curre","_state$labelRef$curre2","_state$buttonRef$curr5","role","tabIndex","features","DEFAULT_OPTION_TAG","Option","_props$disabled2","_useListboxContext4","active","selected","bag","_document$getElementB","_document$getElementB2","getElementById","textContent","select","_document$getElementB3","Specific","_document$getElementB4","scrollIntoView","block","_state$buttonRef$curr6","handleFocus","Nothing","handleMove","handleLeave","onFocus","onPointerMove","onMouseMove","onPointerLeave","onMouseLeave"],"sources":["C:/Users/Joka24/Desktop/diplom/node_modules/@headlessui/react/dist/components/listbox/listbox.esm.js"],"sourcesContent":["import { extends as _extends, objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport React, { useReducer, createRef, useMemo, createContext, useCallback, useRef, useContext, Fragment } from 'react';\nimport { match } from '../../utils/match.esm.js';\nimport { render, forwardRefWithAs, Features } from '../../utils/render.esm.js';\nimport { useSyncRefs } from '../../hooks/use-sync-refs.esm.js';\nimport { Keys } from '../keyboard.esm.js';\nimport { isDisabledReactIssue7711 } from '../../utils/bugs.esm.js';\nimport { useIsoMorphicEffect } from '../../hooks/use-iso-morphic-effect.esm.js';\nimport { useId } from '../../hooks/use-id.esm.js';\nimport { isFocusableElement, FocusableMode } from '../../utils/focus-management.esm.js';\nimport { useWindowEvent } from '../../hooks/use-window-event.esm.js';\nimport { OpenClosedProvider, State, useOpenClosed } from '../../internal/open-closed.esm.js';\nimport { useResolveButtonType } from '../../hooks/use-resolve-button-type.esm.js';\nimport { disposables } from '../../utils/disposables.esm.js';\nimport { useDisposables } from '../../hooks/use-disposables.esm.js';\nimport { useComputed } from '../../hooks/use-computed.esm.js';\nimport { calculateActiveIndex, Focus } from '../../utils/calculate-active-index.esm.js';\n\nvar _reducers;\nvar ListboxStates;\n\n(function (ListboxStates) {\n  ListboxStates[ListboxStates[\"Open\"] = 0] = \"Open\";\n  ListboxStates[ListboxStates[\"Closed\"] = 1] = \"Closed\";\n})(ListboxStates || (ListboxStates = {}));\n\nvar ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[ActionTypes[\"OpenListbox\"] = 0] = \"OpenListbox\";\n  ActionTypes[ActionTypes[\"CloseListbox\"] = 1] = \"CloseListbox\";\n  ActionTypes[ActionTypes[\"SetDisabled\"] = 2] = \"SetDisabled\";\n  ActionTypes[ActionTypes[\"SetOrientation\"] = 3] = \"SetOrientation\";\n  ActionTypes[ActionTypes[\"GoToOption\"] = 4] = \"GoToOption\";\n  ActionTypes[ActionTypes[\"Search\"] = 5] = \"Search\";\n  ActionTypes[ActionTypes[\"ClearSearch\"] = 6] = \"ClearSearch\";\n  ActionTypes[ActionTypes[\"RegisterOption\"] = 7] = \"RegisterOption\";\n  ActionTypes[ActionTypes[\"UnregisterOption\"] = 8] = \"UnregisterOption\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar reducers = (_reducers = {}, _reducers[ActionTypes.CloseListbox] = function (state) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Closed) return state;\n  return _extends({}, state, {\n    activeOptionIndex: null,\n    listboxState: ListboxStates.Closed\n  });\n}, _reducers[ActionTypes.OpenListbox] = function (state) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Open) return state;\n  return _extends({}, state, {\n    listboxState: ListboxStates.Open\n  });\n}, _reducers[ActionTypes.SetDisabled] = function (state, action) {\n  if (state.disabled === action.disabled) return state;\n  return _extends({}, state, {\n    disabled: action.disabled\n  });\n}, _reducers[ActionTypes.SetOrientation] = function (state, action) {\n  if (state.orientation === action.orientation) return state;\n  return _extends({}, state, {\n    orientation: action.orientation\n  });\n}, _reducers[ActionTypes.GoToOption] = function (state, action) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Closed) return state;\n  var activeOptionIndex = calculateActiveIndex(action, {\n    resolveItems: function resolveItems() {\n      return state.options;\n    },\n    resolveActiveIndex: function resolveActiveIndex() {\n      return state.activeOptionIndex;\n    },\n    resolveId: function resolveId(item) {\n      return item.id;\n    },\n    resolveDisabled: function resolveDisabled(item) {\n      return item.dataRef.current.disabled;\n    }\n  });\n  if (state.searchQuery === '' && state.activeOptionIndex === activeOptionIndex) return state;\n  return _extends({}, state, {\n    searchQuery: '',\n    activeOptionIndex: activeOptionIndex\n  });\n}, _reducers[ActionTypes.Search] = function (state, action) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Closed) return state;\n  var searchQuery = state.searchQuery + action.value.toLowerCase();\n  var match = state.options.findIndex(function (option) {\n    var _option$dataRef$curre;\n\n    return !option.dataRef.current.disabled && ((_option$dataRef$curre = option.dataRef.current.textValue) == null ? void 0 : _option$dataRef$curre.startsWith(searchQuery));\n  });\n  if (match === -1 || match === state.activeOptionIndex) return _extends({}, state, {\n    searchQuery: searchQuery\n  });\n  return _extends({}, state, {\n    searchQuery: searchQuery,\n    activeOptionIndex: match\n  });\n}, _reducers[ActionTypes.ClearSearch] = function (state) {\n  if (state.disabled) return state;\n  if (state.listboxState === ListboxStates.Closed) return state;\n  if (state.searchQuery === '') return state;\n  return _extends({}, state, {\n    searchQuery: ''\n  });\n}, _reducers[ActionTypes.RegisterOption] = function (state, action) {\n  return _extends({}, state, {\n    options: [].concat(state.options, [{\n      id: action.id,\n      dataRef: action.dataRef\n    }])\n  });\n}, _reducers[ActionTypes.UnregisterOption] = function (state, action) {\n  var nextOptions = state.options.slice();\n  var currentActiveOption = state.activeOptionIndex !== null ? nextOptions[state.activeOptionIndex] : null;\n  var idx = nextOptions.findIndex(function (a) {\n    return a.id === action.id;\n  });\n  if (idx !== -1) nextOptions.splice(idx, 1);\n  return _extends({}, state, {\n    options: nextOptions,\n    activeOptionIndex: function () {\n      if (idx === state.activeOptionIndex) return null;\n      if (currentActiveOption === null) return null; // If we removed the option before the actual active index, then it would be out of sync. To\n      // fix this, we will find the correct (new) index position.\n\n      return nextOptions.indexOf(currentActiveOption);\n    }()\n  });\n}, _reducers);\nvar ListboxContext = /*#__PURE__*/createContext(null);\nListboxContext.displayName = 'ListboxContext';\n\nfunction useListboxContext(component) {\n  var context = useContext(ListboxContext);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <\" + Listbox.name + \" /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useListboxContext);\n    throw err;\n  }\n\n  return context;\n}\n\nfunction stateReducer(state, action) {\n  return match(action.type, reducers, state, action);\n} // ---\n\n\nvar DEFAULT_LISTBOX_TAG = Fragment;\nfunction Listbox(props) {\n  var _match;\n\n  var value = props.value,\n      onChange = props.onChange,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$horizontal = props.horizontal,\n      horizontal = _props$horizontal === void 0 ? false : _props$horizontal,\n      passThroughProps = _objectWithoutPropertiesLoose(props, [\"value\", \"onChange\", \"disabled\", \"horizontal\"]);\n\n  var orientation = horizontal ? 'horizontal' : 'vertical';\n  var reducerBag = useReducer(stateReducer, {\n    listboxState: ListboxStates.Closed,\n    propsRef: {\n      current: {\n        value: value,\n        onChange: onChange\n      }\n    },\n    labelRef: createRef(),\n    buttonRef: createRef(),\n    optionsRef: createRef(),\n    disabled: disabled,\n    orientation: orientation,\n    options: [],\n    searchQuery: '',\n    activeOptionIndex: null\n  });\n  var _reducerBag$ = reducerBag[0],\n      listboxState = _reducerBag$.listboxState,\n      propsRef = _reducerBag$.propsRef,\n      optionsRef = _reducerBag$.optionsRef,\n      buttonRef = _reducerBag$.buttonRef,\n      dispatch = reducerBag[1];\n  useIsoMorphicEffect(function () {\n    propsRef.current.value = value;\n  }, [value, propsRef]);\n  useIsoMorphicEffect(function () {\n    propsRef.current.onChange = onChange;\n  }, [onChange, propsRef]);\n  useIsoMorphicEffect(function () {\n    return dispatch({\n      type: ActionTypes.SetDisabled,\n      disabled: disabled\n    });\n  }, [disabled]);\n  useIsoMorphicEffect(function () {\n    return dispatch({\n      type: ActionTypes.SetOrientation,\n      orientation: orientation\n    });\n  }, [orientation]); // Handle outside click\n\n  useWindowEvent('mousedown', function (event) {\n    var _buttonRef$current, _optionsRef$current;\n\n    var target = event.target;\n    if (listboxState !== ListboxStates.Open) return;\n    if ((_buttonRef$current = buttonRef.current) == null ? void 0 : _buttonRef$current.contains(target)) return;\n    if ((_optionsRef$current = optionsRef.current) == null ? void 0 : _optionsRef$current.contains(target)) return;\n    dispatch({\n      type: ActionTypes.CloseListbox\n    });\n\n    if (!isFocusableElement(target, FocusableMode.Loose)) {\n      var _buttonRef$current2;\n\n      event.preventDefault();\n      (_buttonRef$current2 = buttonRef.current) == null ? void 0 : _buttonRef$current2.focus();\n    }\n  });\n  var slot = useMemo(function () {\n    return {\n      open: listboxState === ListboxStates.Open,\n      disabled: disabled\n    };\n  }, [listboxState, disabled]);\n  return React.createElement(ListboxContext.Provider, {\n    value: reducerBag\n  }, React.createElement(OpenClosedProvider, {\n    value: match(listboxState, (_match = {}, _match[ListboxStates.Open] = State.Open, _match[ListboxStates.Closed] = State.Closed, _match))\n  }, render({\n    props: passThroughProps,\n    slot: slot,\n    defaultTag: DEFAULT_LISTBOX_TAG,\n    name: 'Listbox'\n  })));\n} // ---\n\nvar DEFAULT_BUTTON_TAG = 'button';\nvar Button = /*#__PURE__*/forwardRefWithAs(function Button(props, ref) {\n  var _state$optionsRef$cur;\n\n  var _useListboxContext = useListboxContext([Listbox.name, Button.name].join('.')),\n      state = _useListboxContext[0],\n      dispatch = _useListboxContext[1];\n\n  var buttonRef = useSyncRefs(state.buttonRef, ref);\n  var id = \"headlessui-listbox-button-\" + useId();\n  var d = useDisposables();\n  var handleKeyDown = useCallback(function (event) {\n    switch (event.key) {\n      // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-13\n      case Keys.Space:\n      case Keys.Enter:\n      case Keys.ArrowDown:\n        event.preventDefault();\n        dispatch({\n          type: ActionTypes.OpenListbox\n        });\n        d.nextFrame(function () {\n          if (!state.propsRef.current.value) dispatch({\n            type: ActionTypes.GoToOption,\n            focus: Focus.First\n          });\n        });\n        break;\n\n      case Keys.ArrowUp:\n        event.preventDefault();\n        dispatch({\n          type: ActionTypes.OpenListbox\n        });\n        d.nextFrame(function () {\n          if (!state.propsRef.current.value) dispatch({\n            type: ActionTypes.GoToOption,\n            focus: Focus.Last\n          });\n        });\n        break;\n    }\n  }, [dispatch, state, d]);\n  var handleKeyUp = useCallback(function (event) {\n    switch (event.key) {\n      case Keys.Space:\n        // Required for firefox, event.preventDefault() in handleKeyDown for\n        // the Space key doesn't cancel the handleKeyUp, which in turn\n        // triggers a *click*.\n        event.preventDefault();\n        break;\n    }\n  }, []);\n  var handleClick = useCallback(function (event) {\n    if (isDisabledReactIssue7711(event.currentTarget)) return event.preventDefault();\n\n    if (state.listboxState === ListboxStates.Open) {\n      dispatch({\n        type: ActionTypes.CloseListbox\n      });\n      d.nextFrame(function () {\n        var _state$buttonRef$curr;\n\n        return (_state$buttonRef$curr = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr.focus({\n          preventScroll: true\n        });\n      });\n    } else {\n      event.preventDefault();\n      dispatch({\n        type: ActionTypes.OpenListbox\n      });\n    }\n  }, [dispatch, d, state]);\n  var labelledby = useComputed(function () {\n    if (!state.labelRef.current) return undefined;\n    return [state.labelRef.current.id, id].join(' ');\n  }, [state.labelRef.current, id]);\n  var slot = useMemo(function () {\n    return {\n      open: state.listboxState === ListboxStates.Open,\n      disabled: state.disabled\n    };\n  }, [state]);\n  var passthroughProps = props;\n  var propsWeControl = {\n    ref: buttonRef,\n    id: id,\n    type: useResolveButtonType(props, state.buttonRef),\n    'aria-haspopup': true,\n    'aria-controls': (_state$optionsRef$cur = state.optionsRef.current) == null ? void 0 : _state$optionsRef$cur.id,\n    'aria-expanded': state.disabled ? undefined : state.listboxState === ListboxStates.Open,\n    'aria-labelledby': labelledby,\n    disabled: state.disabled,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    onClick: handleClick\n  };\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_BUTTON_TAG,\n    name: 'Listbox.Button'\n  });\n}); // ---\n\nvar DEFAULT_LABEL_TAG = 'label';\n\nfunction Label(props) {\n  var _useListboxContext2 = useListboxContext([Listbox.name, Label.name].join('.')),\n      state = _useListboxContext2[0];\n\n  var id = \"headlessui-listbox-label-\" + useId();\n  var handleClick = useCallback(function () {\n    var _state$buttonRef$curr2;\n\n    return (_state$buttonRef$curr2 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr2.focus({\n      preventScroll: true\n    });\n  }, [state.buttonRef]);\n  var slot = useMemo(function () {\n    return {\n      open: state.listboxState === ListboxStates.Open,\n      disabled: state.disabled\n    };\n  }, [state]);\n  var propsWeControl = {\n    ref: state.labelRef,\n    id: id,\n    onClick: handleClick\n  };\n  return render({\n    props: _extends({}, props, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_LABEL_TAG,\n    name: 'Listbox.Label'\n  });\n} // ---\n\n\nvar DEFAULT_OPTIONS_TAG = 'ul';\nvar OptionsRenderFeatures = Features.RenderStrategy | Features.Static;\nvar Options = /*#__PURE__*/forwardRefWithAs(function Options(props, ref) {\n  var _state$options$state$;\n\n  var _useListboxContext3 = useListboxContext([Listbox.name, Options.name].join('.')),\n      state = _useListboxContext3[0],\n      dispatch = _useListboxContext3[1];\n\n  var optionsRef = useSyncRefs(state.optionsRef, ref);\n  var id = \"headlessui-listbox-options-\" + useId();\n  var d = useDisposables();\n  var searchDisposables = useDisposables();\n  var usesOpenClosedState = useOpenClosed();\n\n  var visible = function () {\n    if (usesOpenClosedState !== null) {\n      return usesOpenClosedState === State.Open;\n    }\n\n    return state.listboxState === ListboxStates.Open;\n  }();\n\n  useIsoMorphicEffect(function () {\n    var container = state.optionsRef.current;\n    if (!container) return;\n    if (state.listboxState !== ListboxStates.Open) return;\n    if (container === document.activeElement) return;\n    container.focus({\n      preventScroll: true\n    });\n  }, [state.listboxState, state.optionsRef]);\n  var handleKeyDown = useCallback(function (event) {\n    searchDisposables.dispose();\n\n    switch (event.key) {\n      // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-12\n      // @ts-expect-error Fallthrough is expected here\n      case Keys.Space:\n        if (state.searchQuery !== '') {\n          event.preventDefault();\n          event.stopPropagation();\n          return dispatch({\n            type: ActionTypes.Search,\n            value: event.key\n          });\n        }\n\n      // When in type ahead mode, fallthrough\n\n      case Keys.Enter:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.CloseListbox\n        });\n\n        if (state.activeOptionIndex !== null) {\n          var dataRef = state.options[state.activeOptionIndex].dataRef;\n          state.propsRef.current.onChange(dataRef.current.value);\n        }\n\n        disposables().nextFrame(function () {\n          var _state$buttonRef$curr3;\n\n          return (_state$buttonRef$curr3 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr3.focus({\n            preventScroll: true\n          });\n        });\n        break;\n\n      case match(state.orientation, {\n        vertical: Keys.ArrowDown,\n        horizontal: Keys.ArrowRight\n      }):\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToOption,\n          focus: Focus.Next\n        });\n\n      case match(state.orientation, {\n        vertical: Keys.ArrowUp,\n        horizontal: Keys.ArrowLeft\n      }):\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToOption,\n          focus: Focus.Previous\n        });\n\n      case Keys.Home:\n      case Keys.PageUp:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToOption,\n          focus: Focus.First\n        });\n\n      case Keys.End:\n      case Keys.PageDown:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToOption,\n          focus: Focus.Last\n        });\n\n      case Keys.Escape:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.CloseListbox\n        });\n        return d.nextFrame(function () {\n          var _state$buttonRef$curr4;\n\n          return (_state$buttonRef$curr4 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr4.focus({\n            preventScroll: true\n          });\n        });\n\n      case Keys.Tab:\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n\n      default:\n        if (event.key.length === 1) {\n          dispatch({\n            type: ActionTypes.Search,\n            value: event.key\n          });\n          searchDisposables.setTimeout(function () {\n            return dispatch({\n              type: ActionTypes.ClearSearch\n            });\n          }, 350);\n        }\n\n        break;\n    }\n  }, [d, dispatch, searchDisposables, state]);\n  var labelledby = useComputed(function () {\n    var _state$labelRef$curre, _state$labelRef$curre2, _state$buttonRef$curr5;\n\n    return (_state$labelRef$curre = (_state$labelRef$curre2 = state.labelRef.current) == null ? void 0 : _state$labelRef$curre2.id) != null ? _state$labelRef$curre : (_state$buttonRef$curr5 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr5.id;\n  }, [state.labelRef.current, state.buttonRef.current]);\n  var slot = useMemo(function () {\n    return {\n      open: state.listboxState === ListboxStates.Open\n    };\n  }, [state]);\n  var propsWeControl = {\n    'aria-activedescendant': state.activeOptionIndex === null ? undefined : (_state$options$state$ = state.options[state.activeOptionIndex]) == null ? void 0 : _state$options$state$.id,\n    'aria-labelledby': labelledby,\n    'aria-orientation': state.orientation,\n    id: id,\n    onKeyDown: handleKeyDown,\n    role: 'listbox',\n    tabIndex: 0,\n    ref: optionsRef\n  };\n  var passthroughProps = props;\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_OPTIONS_TAG,\n    features: OptionsRenderFeatures,\n    visible: visible,\n    name: 'Listbox.Options'\n  });\n}); // ---\n\nvar DEFAULT_OPTION_TAG = 'li';\n\nfunction Option(props) {\n  var _props$disabled2 = props.disabled,\n      disabled = _props$disabled2 === void 0 ? false : _props$disabled2,\n      value = props.value,\n      passthroughProps = _objectWithoutPropertiesLoose(props, [\"disabled\", \"value\"]);\n\n  var _useListboxContext4 = useListboxContext([Listbox.name, Option.name].join('.')),\n      state = _useListboxContext4[0],\n      dispatch = _useListboxContext4[1];\n\n  var id = \"headlessui-listbox-option-\" + useId();\n  var active = state.activeOptionIndex !== null ? state.options[state.activeOptionIndex].id === id : false;\n  var selected = state.propsRef.current.value === value;\n  var bag = useRef({\n    disabled: disabled,\n    value: value\n  });\n  useIsoMorphicEffect(function () {\n    bag.current.disabled = disabled;\n  }, [bag, disabled]);\n  useIsoMorphicEffect(function () {\n    bag.current.value = value;\n  }, [bag, value]);\n  useIsoMorphicEffect(function () {\n    var _document$getElementB, _document$getElementB2;\n\n    bag.current.textValue = (_document$getElementB = document.getElementById(id)) == null ? void 0 : (_document$getElementB2 = _document$getElementB.textContent) == null ? void 0 : _document$getElementB2.toLowerCase();\n  }, [bag, id]);\n  var select = useCallback(function () {\n    return state.propsRef.current.onChange(value);\n  }, [state.propsRef, value]);\n  useIsoMorphicEffect(function () {\n    dispatch({\n      type: ActionTypes.RegisterOption,\n      id: id,\n      dataRef: bag\n    });\n    return function () {\n      return dispatch({\n        type: ActionTypes.UnregisterOption,\n        id: id\n      });\n    };\n  }, [bag, id]);\n  useIsoMorphicEffect(function () {\n    var _document$getElementB3;\n\n    if (state.listboxState !== ListboxStates.Open) return;\n    if (!selected) return;\n    dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Specific,\n      id: id\n    });\n    (_document$getElementB3 = document.getElementById(id)) == null ? void 0 : _document$getElementB3.focus == null ? void 0 : _document$getElementB3.focus();\n  }, [state.listboxState]);\n  useIsoMorphicEffect(function () {\n    if (state.listboxState !== ListboxStates.Open) return;\n    if (!active) return;\n    var d = disposables();\n    d.nextFrame(function () {\n      var _document$getElementB4;\n\n      return (_document$getElementB4 = document.getElementById(id)) == null ? void 0 : _document$getElementB4.scrollIntoView == null ? void 0 : _document$getElementB4.scrollIntoView({\n        block: 'nearest'\n      });\n    });\n    return d.dispose;\n  }, [id, active, state.listboxState]);\n  var handleClick = useCallback(function (event) {\n    if (disabled) return event.preventDefault();\n    select();\n    dispatch({\n      type: ActionTypes.CloseListbox\n    });\n    disposables().nextFrame(function () {\n      var _state$buttonRef$curr6;\n\n      return (_state$buttonRef$curr6 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr6.focus({\n        preventScroll: true\n      });\n    });\n  }, [dispatch, state.buttonRef, disabled, select]);\n  var handleFocus = useCallback(function () {\n    if (disabled) return dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Nothing\n    });\n    dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Specific,\n      id: id\n    });\n  }, [disabled, id, dispatch]);\n  var handleMove = useCallback(function () {\n    if (disabled) return;\n    if (active) return;\n    dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Specific,\n      id: id\n    });\n  }, [disabled, active, id, dispatch]);\n  var handleLeave = useCallback(function () {\n    if (disabled) return;\n    if (!active) return;\n    dispatch({\n      type: ActionTypes.GoToOption,\n      focus: Focus.Nothing\n    });\n  }, [disabled, active, dispatch]);\n  var slot = useMemo(function () {\n    return {\n      active: active,\n      selected: selected,\n      disabled: disabled\n    };\n  }, [active, selected, disabled]);\n  var propsWeControl = {\n    id: id,\n    role: 'option',\n    tabIndex: disabled === true ? undefined : -1,\n    'aria-disabled': disabled === true ? true : undefined,\n    'aria-selected': selected === true ? true : undefined,\n    disabled: undefined,\n    onClick: handleClick,\n    onFocus: handleFocus,\n    onPointerMove: handleMove,\n    onMouseMove: handleMove,\n    onPointerLeave: handleLeave,\n    onMouseLeave: handleLeave\n  };\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_OPTION_TAG,\n    name: 'Listbox.Option'\n  });\n} // ---\n\n\nListbox.Button = Button;\nListbox.Label = Label;\nListbox.Options = Options;\nListbox.Option = Option;\n\nexport { Listbox };\n"]},"metadata":{},"sourceType":"module"}