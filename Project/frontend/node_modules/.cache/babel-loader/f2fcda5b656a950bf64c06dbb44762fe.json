{"ast":null,"code":"import { extends as _extends, objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport React, { useReducer, createRef, useMemo, createContext, useCallback, useEffect, useRef, useContext, Fragment } from 'react';\nimport { match } from '../../utils/match.esm.js';\nimport { render, forwardRefWithAs, Features } from '../../utils/render.esm.js';\nimport { useSyncRefs } from '../../hooks/use-sync-refs.esm.js';\nimport { Keys } from '../keyboard.esm.js';\nimport { isDisabledReactIssue7711 } from '../../utils/bugs.esm.js';\nimport { useIsoMorphicEffect } from '../../hooks/use-iso-morphic-effect.esm.js';\nimport { useId } from '../../hooks/use-id.esm.js';\nimport { isFocusableElement, FocusableMode } from '../../utils/focus-management.esm.js';\nimport { useWindowEvent } from '../../hooks/use-window-event.esm.js';\nimport { OpenClosedProvider, State, useOpenClosed } from '../../internal/open-closed.esm.js';\nimport { useResolveButtonType } from '../../hooks/use-resolve-button-type.esm.js';\nimport { disposables } from '../../utils/disposables.esm.js';\nimport { useDisposables } from '../../hooks/use-disposables.esm.js';\nimport { calculateActiveIndex, Focus } from '../../utils/calculate-active-index.esm.js';\nimport { useTreeWalker } from '../../hooks/use-tree-walker.esm.js';\n\nvar _reducers;\n\nvar MenuStates;\n\n(function (MenuStates) {\n  MenuStates[MenuStates[\"Open\"] = 0] = \"Open\";\n  MenuStates[MenuStates[\"Closed\"] = 1] = \"Closed\";\n})(MenuStates || (MenuStates = {}));\n\nvar ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[ActionTypes[\"OpenMenu\"] = 0] = \"OpenMenu\";\n  ActionTypes[ActionTypes[\"CloseMenu\"] = 1] = \"CloseMenu\";\n  ActionTypes[ActionTypes[\"GoToItem\"] = 2] = \"GoToItem\";\n  ActionTypes[ActionTypes[\"Search\"] = 3] = \"Search\";\n  ActionTypes[ActionTypes[\"ClearSearch\"] = 4] = \"ClearSearch\";\n  ActionTypes[ActionTypes[\"RegisterItem\"] = 5] = \"RegisterItem\";\n  ActionTypes[ActionTypes[\"UnregisterItem\"] = 6] = \"UnregisterItem\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar reducers = (_reducers = {}, _reducers[ActionTypes.CloseMenu] = function (state) {\n  if (state.menuState === MenuStates.Closed) return state;\n  return _extends({}, state, {\n    activeItemIndex: null,\n    menuState: MenuStates.Closed\n  });\n}, _reducers[ActionTypes.OpenMenu] = function (state) {\n  if (state.menuState === MenuStates.Open) return state;\n  return _extends({}, state, {\n    menuState: MenuStates.Open\n  });\n}, _reducers[ActionTypes.GoToItem] = function (state, action) {\n  var activeItemIndex = calculateActiveIndex(action, {\n    resolveItems: function resolveItems() {\n      return state.items;\n    },\n    resolveActiveIndex: function resolveActiveIndex() {\n      return state.activeItemIndex;\n    },\n    resolveId: function resolveId(item) {\n      return item.id;\n    },\n    resolveDisabled: function resolveDisabled(item) {\n      return item.dataRef.current.disabled;\n    }\n  });\n  if (state.searchQuery === '' && state.activeItemIndex === activeItemIndex) return state;\n  return _extends({}, state, {\n    searchQuery: '',\n    activeItemIndex: activeItemIndex\n  });\n}, _reducers[ActionTypes.Search] = function (state, action) {\n  var searchQuery = state.searchQuery + action.value.toLowerCase();\n  var match = state.items.findIndex(function (item) {\n    var _item$dataRef$current;\n\n    return ((_item$dataRef$current = item.dataRef.current.textValue) == null ? void 0 : _item$dataRef$current.startsWith(searchQuery)) && !item.dataRef.current.disabled;\n  });\n  if (match === -1 || match === state.activeItemIndex) return _extends({}, state, {\n    searchQuery: searchQuery\n  });\n  return _extends({}, state, {\n    searchQuery: searchQuery,\n    activeItemIndex: match\n  });\n}, _reducers[ActionTypes.ClearSearch] = function (state) {\n  if (state.searchQuery === '') return state;\n  return _extends({}, state, {\n    searchQuery: ''\n  });\n}, _reducers[ActionTypes.RegisterItem] = function (state, action) {\n  return _extends({}, state, {\n    items: [].concat(state.items, [{\n      id: action.id,\n      dataRef: action.dataRef\n    }])\n  });\n}, _reducers[ActionTypes.UnregisterItem] = function (state, action) {\n  var nextItems = state.items.slice();\n  var currentActiveItem = state.activeItemIndex !== null ? nextItems[state.activeItemIndex] : null;\n  var idx = nextItems.findIndex(function (a) {\n    return a.id === action.id;\n  });\n  if (idx !== -1) nextItems.splice(idx, 1);\n  return _extends({}, state, {\n    items: nextItems,\n    activeItemIndex: function () {\n      if (idx === state.activeItemIndex) return null;\n      if (currentActiveItem === null) return null; // If we removed the item before the actual active index, then it would be out of sync. To\n      // fix this, we will find the correct (new) index position.\n\n      return nextItems.indexOf(currentActiveItem);\n    }()\n  });\n}, _reducers);\nvar MenuContext = /*#__PURE__*/createContext(null);\nMenuContext.displayName = 'MenuContext';\n\nfunction useMenuContext(component) {\n  var context = useContext(MenuContext);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <\" + Menu.name + \" /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useMenuContext);\n    throw err;\n  }\n\n  return context;\n}\n\nfunction stateReducer(state, action) {\n  return match(action.type, reducers, state, action);\n} // ---\n\n\nvar DEFAULT_MENU_TAG = Fragment;\n\nfunction Menu(props) {\n  var _match;\n\n  var reducerBag = useReducer(stateReducer, {\n    menuState: MenuStates.Closed,\n    buttonRef: createRef(),\n    itemsRef: createRef(),\n    items: [],\n    searchQuery: '',\n    activeItemIndex: null\n  });\n  var _reducerBag$ = reducerBag[0],\n      menuState = _reducerBag$.menuState,\n      itemsRef = _reducerBag$.itemsRef,\n      buttonRef = _reducerBag$.buttonRef,\n      dispatch = reducerBag[1]; // Handle outside click\n\n  useWindowEvent('mousedown', function (event) {\n    var _buttonRef$current, _itemsRef$current;\n\n    var target = event.target;\n    if (menuState !== MenuStates.Open) return;\n    if ((_buttonRef$current = buttonRef.current) == null ? void 0 : _buttonRef$current.contains(target)) return;\n    if ((_itemsRef$current = itemsRef.current) == null ? void 0 : _itemsRef$current.contains(target)) return;\n    dispatch({\n      type: ActionTypes.CloseMenu\n    });\n\n    if (!isFocusableElement(target, FocusableMode.Loose)) {\n      var _buttonRef$current2;\n\n      event.preventDefault();\n      (_buttonRef$current2 = buttonRef.current) == null ? void 0 : _buttonRef$current2.focus();\n    }\n  });\n  var slot = useMemo(function () {\n    return {\n      open: menuState === MenuStates.Open\n    };\n  }, [menuState]);\n  return React.createElement(MenuContext.Provider, {\n    value: reducerBag\n  }, React.createElement(OpenClosedProvider, {\n    value: match(menuState, (_match = {}, _match[MenuStates.Open] = State.Open, _match[MenuStates.Closed] = State.Closed, _match))\n  }, render({\n    props: props,\n    slot: slot,\n    defaultTag: DEFAULT_MENU_TAG,\n    name: 'Menu'\n  })));\n} // ---\n\n\nvar DEFAULT_BUTTON_TAG = 'button';\nvar Button = /*#__PURE__*/forwardRefWithAs(function Button(props, ref) {\n  var _state$itemsRef$curre;\n\n  var _useMenuContext = useMenuContext([Menu.name, Button.name].join('.')),\n      state = _useMenuContext[0],\n      dispatch = _useMenuContext[1];\n\n  var buttonRef = useSyncRefs(state.buttonRef, ref);\n  var id = \"headlessui-menu-button-\" + useId();\n  var d = useDisposables();\n  var handleKeyDown = useCallback(function (event) {\n    switch (event.key) {\n      // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-13\n      case Keys.Space:\n      case Keys.Enter:\n      case Keys.ArrowDown:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.OpenMenu\n        });\n        d.nextFrame(function () {\n          return dispatch({\n            type: ActionTypes.GoToItem,\n            focus: Focus.First\n          });\n        });\n        break;\n\n      case Keys.ArrowUp:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.OpenMenu\n        });\n        d.nextFrame(function () {\n          return dispatch({\n            type: ActionTypes.GoToItem,\n            focus: Focus.Last\n          });\n        });\n        break;\n    }\n  }, [dispatch, d]);\n  var handleKeyUp = useCallback(function (event) {\n    switch (event.key) {\n      case Keys.Space:\n        // Required for firefox, event.preventDefault() in handleKeyDown for\n        // the Space key doesn't cancel the handleKeyUp, which in turn\n        // triggers a *click*.\n        event.preventDefault();\n        break;\n    }\n  }, []);\n  var handleClick = useCallback(function (event) {\n    if (isDisabledReactIssue7711(event.currentTarget)) return event.preventDefault();\n    if (props.disabled) return;\n\n    if (state.menuState === MenuStates.Open) {\n      dispatch({\n        type: ActionTypes.CloseMenu\n      });\n      d.nextFrame(function () {\n        var _state$buttonRef$curr;\n\n        return (_state$buttonRef$curr = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr.focus({\n          preventScroll: true\n        });\n      });\n    } else {\n      event.preventDefault();\n      event.stopPropagation();\n      dispatch({\n        type: ActionTypes.OpenMenu\n      });\n    }\n  }, [dispatch, d, state, props.disabled]);\n  var slot = useMemo(function () {\n    return {\n      open: state.menuState === MenuStates.Open\n    };\n  }, [state]);\n  var passthroughProps = props;\n  var propsWeControl = {\n    ref: buttonRef,\n    id: id,\n    type: useResolveButtonType(props, state.buttonRef),\n    'aria-haspopup': true,\n    'aria-controls': (_state$itemsRef$curre = state.itemsRef.current) == null ? void 0 : _state$itemsRef$curre.id,\n    'aria-expanded': props.disabled ? undefined : state.menuState === MenuStates.Open,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    onClick: handleClick\n  };\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_BUTTON_TAG,\n    name: 'Menu.Button'\n  });\n}); // ---\n\nvar DEFAULT_ITEMS_TAG = 'div';\nvar ItemsRenderFeatures = Features.RenderStrategy | Features.Static;\nvar Items = /*#__PURE__*/forwardRefWithAs(function Items(props, ref) {\n  var _state$items$state$ac, _state$buttonRef$curr4;\n\n  var _useMenuContext2 = useMenuContext([Menu.name, Items.name].join('.')),\n      state = _useMenuContext2[0],\n      dispatch = _useMenuContext2[1];\n\n  var itemsRef = useSyncRefs(state.itemsRef, ref);\n  var id = \"headlessui-menu-items-\" + useId();\n  var searchDisposables = useDisposables();\n  var usesOpenClosedState = useOpenClosed();\n\n  var visible = function () {\n    if (usesOpenClosedState !== null) {\n      return usesOpenClosedState === State.Open;\n    }\n\n    return state.menuState === MenuStates.Open;\n  }();\n\n  useEffect(function () {\n    var container = state.itemsRef.current;\n    if (!container) return;\n    if (state.menuState !== MenuStates.Open) return;\n    if (container === document.activeElement) return;\n    container.focus({\n      preventScroll: true\n    });\n  }, [state.menuState, state.itemsRef]);\n  useTreeWalker({\n    container: state.itemsRef.current,\n    enabled: state.menuState === MenuStates.Open,\n    accept: function accept(node) {\n      if (node.getAttribute('role') === 'menuitem') return NodeFilter.FILTER_REJECT;\n      if (node.hasAttribute('role')) return NodeFilter.FILTER_SKIP;\n      return NodeFilter.FILTER_ACCEPT;\n    },\n    walk: function walk(node) {\n      node.setAttribute('role', 'none');\n    }\n  });\n  var handleKeyDown = useCallback(function (event) {\n    searchDisposables.dispose();\n\n    switch (event.key) {\n      // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-12\n      // @ts-expect-error Fallthrough is expected here\n      case Keys.Space:\n        if (state.searchQuery !== '') {\n          event.preventDefault();\n          event.stopPropagation();\n          return dispatch({\n            type: ActionTypes.Search,\n            value: event.key\n          });\n        }\n\n      // When in type ahead mode, fallthrough\n\n      case Keys.Enter:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.CloseMenu\n        });\n\n        if (state.activeItemIndex !== null) {\n          var _document$getElementB;\n\n          var _id = state.items[state.activeItemIndex].id;\n          (_document$getElementB = document.getElementById(_id)) == null ? void 0 : _document$getElementB.click();\n        }\n\n        disposables().nextFrame(function () {\n          var _state$buttonRef$curr2;\n\n          return (_state$buttonRef$curr2 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr2.focus({\n            preventScroll: true\n          });\n        });\n        break;\n\n      case Keys.ArrowDown:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToItem,\n          focus: Focus.Next\n        });\n\n      case Keys.ArrowUp:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToItem,\n          focus: Focus.Previous\n        });\n\n      case Keys.Home:\n      case Keys.PageUp:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToItem,\n          focus: Focus.First\n        });\n\n      case Keys.End:\n      case Keys.PageDown:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToItem,\n          focus: Focus.Last\n        });\n\n      case Keys.Escape:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.CloseMenu\n        });\n        disposables().nextFrame(function () {\n          var _state$buttonRef$curr3;\n\n          return (_state$buttonRef$curr3 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr3.focus({\n            preventScroll: true\n          });\n        });\n        break;\n\n      case Keys.Tab:\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n\n      default:\n        if (event.key.length === 1) {\n          dispatch({\n            type: ActionTypes.Search,\n            value: event.key\n          });\n          searchDisposables.setTimeout(function () {\n            return dispatch({\n              type: ActionTypes.ClearSearch\n            });\n          }, 350);\n        }\n\n        break;\n    }\n  }, [dispatch, searchDisposables, state]);\n  var handleKeyUp = useCallback(function (event) {\n    switch (event.key) {\n      case Keys.Space:\n        // Required for firefox, event.preventDefault() in handleKeyDown for\n        // the Space key doesn't cancel the handleKeyUp, which in turn\n        // triggers a *click*.\n        event.preventDefault();\n        break;\n    }\n  }, []);\n  var slot = useMemo(function () {\n    return {\n      open: state.menuState === MenuStates.Open\n    };\n  }, [state]);\n  var propsWeControl = {\n    'aria-activedescendant': state.activeItemIndex === null ? undefined : (_state$items$state$ac = state.items[state.activeItemIndex]) == null ? void 0 : _state$items$state$ac.id,\n    'aria-labelledby': (_state$buttonRef$curr4 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr4.id,\n    id: id,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    role: 'menu',\n    tabIndex: 0,\n    ref: itemsRef\n  };\n  var passthroughProps = props;\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_ITEMS_TAG,\n    features: ItemsRenderFeatures,\n    visible: visible,\n    name: 'Menu.Items'\n  });\n}); // ---\n\nvar DEFAULT_ITEM_TAG = Fragment;\n\nfunction Item(props) {\n  var _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      onClick = props.onClick,\n      passthroughProps = _objectWithoutPropertiesLoose(props, [\"disabled\", \"onClick\"]);\n\n  var _useMenuContext3 = useMenuContext([Menu.name, Item.name].join('.')),\n      state = _useMenuContext3[0],\n      dispatch = _useMenuContext3[1];\n\n  var id = \"headlessui-menu-item-\" + useId();\n  var active = state.activeItemIndex !== null ? state.items[state.activeItemIndex].id === id : false;\n  useIsoMorphicEffect(function () {\n    if (state.menuState !== MenuStates.Open) return;\n    if (!active) return;\n    var d = disposables();\n    d.nextFrame(function () {\n      var _document$getElementB2;\n\n      return (_document$getElementB2 = document.getElementById(id)) == null ? void 0 : _document$getElementB2.scrollIntoView == null ? void 0 : _document$getElementB2.scrollIntoView({\n        block: 'nearest'\n      });\n    });\n    return d.dispose;\n  }, [id, active, state.menuState]);\n  var bag = useRef({\n    disabled: disabled\n  });\n  useIsoMorphicEffect(function () {\n    bag.current.disabled = disabled;\n  }, [bag, disabled]);\n  useIsoMorphicEffect(function () {\n    var _document$getElementB3, _document$getElementB4;\n\n    bag.current.textValue = (_document$getElementB3 = document.getElementById(id)) == null ? void 0 : (_document$getElementB4 = _document$getElementB3.textContent) == null ? void 0 : _document$getElementB4.toLowerCase();\n  }, [bag, id]);\n  useIsoMorphicEffect(function () {\n    dispatch({\n      type: ActionTypes.RegisterItem,\n      id: id,\n      dataRef: bag\n    });\n    return function () {\n      return dispatch({\n        type: ActionTypes.UnregisterItem,\n        id: id\n      });\n    };\n  }, [bag, id]);\n  var handleClick = useCallback(function (event) {\n    if (disabled) return event.preventDefault();\n    dispatch({\n      type: ActionTypes.CloseMenu\n    });\n    disposables().nextFrame(function () {\n      var _state$buttonRef$curr5;\n\n      return (_state$buttonRef$curr5 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr5.focus({\n        preventScroll: true\n      });\n    });\n    if (onClick) return onClick(event);\n  }, [dispatch, state.buttonRef, disabled, onClick]);\n  var handleFocus = useCallback(function () {\n    if (disabled) return dispatch({\n      type: ActionTypes.GoToItem,\n      focus: Focus.Nothing\n    });\n    dispatch({\n      type: ActionTypes.GoToItem,\n      focus: Focus.Specific,\n      id: id\n    });\n  }, [disabled, id, dispatch]);\n  var handleMove = useCallback(function () {\n    if (disabled) return;\n    if (active) return;\n    dispatch({\n      type: ActionTypes.GoToItem,\n      focus: Focus.Specific,\n      id: id\n    });\n  }, [disabled, active, id, dispatch]);\n  var handleLeave = useCallback(function () {\n    if (disabled) return;\n    if (!active) return;\n    dispatch({\n      type: ActionTypes.GoToItem,\n      focus: Focus.Nothing\n    });\n  }, [disabled, active, dispatch]);\n  var slot = useMemo(function () {\n    return {\n      active: active,\n      disabled: disabled\n    };\n  }, [active, disabled]);\n  var propsWeControl = {\n    id: id,\n    role: 'menuitem',\n    tabIndex: disabled === true ? undefined : -1,\n    'aria-disabled': disabled === true ? true : undefined,\n    disabled: undefined,\n    onClick: handleClick,\n    onFocus: handleFocus,\n    onPointerMove: handleMove,\n    onMouseMove: handleMove,\n    onPointerLeave: handleLeave,\n    onMouseLeave: handleLeave\n  };\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_ITEM_TAG,\n    name: 'Menu.Item'\n  });\n} // ---\n\n\nMenu.Button = Button;\nMenu.Items = Items;\nMenu.Item = Item;\nexport { Menu };","map":{"version":3,"mappings":"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","names":["extends","_extends","objectWithoutPropertiesLoose","_objectWithoutPropertiesLoose","React","useReducer","createRef","useMemo","createContext","useCallback","useEffect","useRef","useContext","Fragment","match","render","forwardRefWithAs","Features","useSyncRefs","Keys","isDisabledReactIssue7711","useIsoMorphicEffect","useId","isFocusableElement","FocusableMode","useWindowEvent","OpenClosedProvider","State","useOpenClosed","useResolveButtonType","disposables","useDisposables","calculateActiveIndex","Focus","useTreeWalker","_reducers","MenuStates","ActionTypes","reducers","CloseMenu","state","menuState","Closed","activeItemIndex","OpenMenu","Open","GoToItem","action","resolveItems","items","resolveActiveIndex","resolveId","item","id","resolveDisabled","dataRef","current","disabled","searchQuery","Search","value","toLowerCase","findIndex","_item$dataRef$current","textValue","startsWith","ClearSearch","RegisterItem","concat","UnregisterItem","nextItems","slice","currentActiveItem","idx","a","splice","indexOf","MenuContext","displayName","useMenuContext","component","context","err","Error","Menu","name","captureStackTrace","stateReducer","type","DEFAULT_MENU_TAG","props","_match","reducerBag","buttonRef","itemsRef","_reducerBag$","dispatch","event","_buttonRef$current","_itemsRef$current","target","contains","Loose","_buttonRef$current2","preventDefault","focus","slot","open","createElement","Provider","defaultTag","DEFAULT_BUTTON_TAG","Button","ref","_state$itemsRef$curre","_useMenuContext","join","d","handleKeyDown","key","Space","Enter","ArrowDown","stopPropagation","nextFrame","First","ArrowUp","Last","handleKeyUp","handleClick","currentTarget","_state$buttonRef$curr","preventScroll","passthroughProps","propsWeControl","undefined","onKeyDown","onKeyUp","onClick","DEFAULT_ITEMS_TAG","ItemsRenderFeatures","RenderStrategy","Static","Items","_state$items$state$ac","_state$buttonRef$curr4","_useMenuContext2","searchDisposables","usesOpenClosedState","visible","container","document","activeElement","enabled","accept","node","getAttribute","NodeFilter","FILTER_REJECT","hasAttribute","FILTER_SKIP","FILTER_ACCEPT","walk","setAttribute","dispose","_document$getElementB","_id","getElementById","click","_state$buttonRef$curr2","Next","Previous","Home","PageUp","End","PageDown","Escape","_state$buttonRef$curr3","Tab","length","setTimeout","role","tabIndex","features","DEFAULT_ITEM_TAG","Item","_props$disabled","_useMenuContext3","active","_document$getElementB2","scrollIntoView","block","bag","_document$getElementB3","_document$getElementB4","textContent","_state$buttonRef$curr5","handleFocus","Nothing","Specific","handleMove","handleLeave","onFocus","onPointerMove","onMouseMove","onPointerLeave","onMouseLeave"],"sources":["C:/Users/Joka24/Desktop/diplom/node_modules/@headlessui/react/dist/components/menu/menu.esm.js"],"sourcesContent":["import { extends as _extends, objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport React, { useReducer, createRef, useMemo, createContext, useCallback, useEffect, useRef, useContext, Fragment } from 'react';\nimport { match } from '../../utils/match.esm.js';\nimport { render, forwardRefWithAs, Features } from '../../utils/render.esm.js';\nimport { useSyncRefs } from '../../hooks/use-sync-refs.esm.js';\nimport { Keys } from '../keyboard.esm.js';\nimport { isDisabledReactIssue7711 } from '../../utils/bugs.esm.js';\nimport { useIsoMorphicEffect } from '../../hooks/use-iso-morphic-effect.esm.js';\nimport { useId } from '../../hooks/use-id.esm.js';\nimport { isFocusableElement, FocusableMode } from '../../utils/focus-management.esm.js';\nimport { useWindowEvent } from '../../hooks/use-window-event.esm.js';\nimport { OpenClosedProvider, State, useOpenClosed } from '../../internal/open-closed.esm.js';\nimport { useResolveButtonType } from '../../hooks/use-resolve-button-type.esm.js';\nimport { disposables } from '../../utils/disposables.esm.js';\nimport { useDisposables } from '../../hooks/use-disposables.esm.js';\nimport { calculateActiveIndex, Focus } from '../../utils/calculate-active-index.esm.js';\nimport { useTreeWalker } from '../../hooks/use-tree-walker.esm.js';\n\nvar _reducers;\nvar MenuStates;\n\n(function (MenuStates) {\n  MenuStates[MenuStates[\"Open\"] = 0] = \"Open\";\n  MenuStates[MenuStates[\"Closed\"] = 1] = \"Closed\";\n})(MenuStates || (MenuStates = {}));\n\nvar ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[ActionTypes[\"OpenMenu\"] = 0] = \"OpenMenu\";\n  ActionTypes[ActionTypes[\"CloseMenu\"] = 1] = \"CloseMenu\";\n  ActionTypes[ActionTypes[\"GoToItem\"] = 2] = \"GoToItem\";\n  ActionTypes[ActionTypes[\"Search\"] = 3] = \"Search\";\n  ActionTypes[ActionTypes[\"ClearSearch\"] = 4] = \"ClearSearch\";\n  ActionTypes[ActionTypes[\"RegisterItem\"] = 5] = \"RegisterItem\";\n  ActionTypes[ActionTypes[\"UnregisterItem\"] = 6] = \"UnregisterItem\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar reducers = (_reducers = {}, _reducers[ActionTypes.CloseMenu] = function (state) {\n  if (state.menuState === MenuStates.Closed) return state;\n  return _extends({}, state, {\n    activeItemIndex: null,\n    menuState: MenuStates.Closed\n  });\n}, _reducers[ActionTypes.OpenMenu] = function (state) {\n  if (state.menuState === MenuStates.Open) return state;\n  return _extends({}, state, {\n    menuState: MenuStates.Open\n  });\n}, _reducers[ActionTypes.GoToItem] = function (state, action) {\n  var activeItemIndex = calculateActiveIndex(action, {\n    resolveItems: function resolveItems() {\n      return state.items;\n    },\n    resolveActiveIndex: function resolveActiveIndex() {\n      return state.activeItemIndex;\n    },\n    resolveId: function resolveId(item) {\n      return item.id;\n    },\n    resolveDisabled: function resolveDisabled(item) {\n      return item.dataRef.current.disabled;\n    }\n  });\n  if (state.searchQuery === '' && state.activeItemIndex === activeItemIndex) return state;\n  return _extends({}, state, {\n    searchQuery: '',\n    activeItemIndex: activeItemIndex\n  });\n}, _reducers[ActionTypes.Search] = function (state, action) {\n  var searchQuery = state.searchQuery + action.value.toLowerCase();\n  var match = state.items.findIndex(function (item) {\n    var _item$dataRef$current;\n\n    return ((_item$dataRef$current = item.dataRef.current.textValue) == null ? void 0 : _item$dataRef$current.startsWith(searchQuery)) && !item.dataRef.current.disabled;\n  });\n  if (match === -1 || match === state.activeItemIndex) return _extends({}, state, {\n    searchQuery: searchQuery\n  });\n  return _extends({}, state, {\n    searchQuery: searchQuery,\n    activeItemIndex: match\n  });\n}, _reducers[ActionTypes.ClearSearch] = function (state) {\n  if (state.searchQuery === '') return state;\n  return _extends({}, state, {\n    searchQuery: ''\n  });\n}, _reducers[ActionTypes.RegisterItem] = function (state, action) {\n  return _extends({}, state, {\n    items: [].concat(state.items, [{\n      id: action.id,\n      dataRef: action.dataRef\n    }])\n  });\n}, _reducers[ActionTypes.UnregisterItem] = function (state, action) {\n  var nextItems = state.items.slice();\n  var currentActiveItem = state.activeItemIndex !== null ? nextItems[state.activeItemIndex] : null;\n  var idx = nextItems.findIndex(function (a) {\n    return a.id === action.id;\n  });\n  if (idx !== -1) nextItems.splice(idx, 1);\n  return _extends({}, state, {\n    items: nextItems,\n    activeItemIndex: function () {\n      if (idx === state.activeItemIndex) return null;\n      if (currentActiveItem === null) return null; // If we removed the item before the actual active index, then it would be out of sync. To\n      // fix this, we will find the correct (new) index position.\n\n      return nextItems.indexOf(currentActiveItem);\n    }()\n  });\n}, _reducers);\nvar MenuContext = /*#__PURE__*/createContext(null);\nMenuContext.displayName = 'MenuContext';\n\nfunction useMenuContext(component) {\n  var context = useContext(MenuContext);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <\" + Menu.name + \" /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useMenuContext);\n    throw err;\n  }\n\n  return context;\n}\n\nfunction stateReducer(state, action) {\n  return match(action.type, reducers, state, action);\n} // ---\n\n\nvar DEFAULT_MENU_TAG = Fragment;\nfunction Menu(props) {\n  var _match;\n\n  var reducerBag = useReducer(stateReducer, {\n    menuState: MenuStates.Closed,\n    buttonRef: createRef(),\n    itemsRef: createRef(),\n    items: [],\n    searchQuery: '',\n    activeItemIndex: null\n  });\n  var _reducerBag$ = reducerBag[0],\n      menuState = _reducerBag$.menuState,\n      itemsRef = _reducerBag$.itemsRef,\n      buttonRef = _reducerBag$.buttonRef,\n      dispatch = reducerBag[1]; // Handle outside click\n\n  useWindowEvent('mousedown', function (event) {\n    var _buttonRef$current, _itemsRef$current;\n\n    var target = event.target;\n    if (menuState !== MenuStates.Open) return;\n    if ((_buttonRef$current = buttonRef.current) == null ? void 0 : _buttonRef$current.contains(target)) return;\n    if ((_itemsRef$current = itemsRef.current) == null ? void 0 : _itemsRef$current.contains(target)) return;\n    dispatch({\n      type: ActionTypes.CloseMenu\n    });\n\n    if (!isFocusableElement(target, FocusableMode.Loose)) {\n      var _buttonRef$current2;\n\n      event.preventDefault();\n      (_buttonRef$current2 = buttonRef.current) == null ? void 0 : _buttonRef$current2.focus();\n    }\n  });\n  var slot = useMemo(function () {\n    return {\n      open: menuState === MenuStates.Open\n    };\n  }, [menuState]);\n  return React.createElement(MenuContext.Provider, {\n    value: reducerBag\n  }, React.createElement(OpenClosedProvider, {\n    value: match(menuState, (_match = {}, _match[MenuStates.Open] = State.Open, _match[MenuStates.Closed] = State.Closed, _match))\n  }, render({\n    props: props,\n    slot: slot,\n    defaultTag: DEFAULT_MENU_TAG,\n    name: 'Menu'\n  })));\n} // ---\n\nvar DEFAULT_BUTTON_TAG = 'button';\nvar Button = /*#__PURE__*/forwardRefWithAs(function Button(props, ref) {\n  var _state$itemsRef$curre;\n\n  var _useMenuContext = useMenuContext([Menu.name, Button.name].join('.')),\n      state = _useMenuContext[0],\n      dispatch = _useMenuContext[1];\n\n  var buttonRef = useSyncRefs(state.buttonRef, ref);\n  var id = \"headlessui-menu-button-\" + useId();\n  var d = useDisposables();\n  var handleKeyDown = useCallback(function (event) {\n    switch (event.key) {\n      // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-13\n      case Keys.Space:\n      case Keys.Enter:\n      case Keys.ArrowDown:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.OpenMenu\n        });\n        d.nextFrame(function () {\n          return dispatch({\n            type: ActionTypes.GoToItem,\n            focus: Focus.First\n          });\n        });\n        break;\n\n      case Keys.ArrowUp:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.OpenMenu\n        });\n        d.nextFrame(function () {\n          return dispatch({\n            type: ActionTypes.GoToItem,\n            focus: Focus.Last\n          });\n        });\n        break;\n    }\n  }, [dispatch, d]);\n  var handleKeyUp = useCallback(function (event) {\n    switch (event.key) {\n      case Keys.Space:\n        // Required for firefox, event.preventDefault() in handleKeyDown for\n        // the Space key doesn't cancel the handleKeyUp, which in turn\n        // triggers a *click*.\n        event.preventDefault();\n        break;\n    }\n  }, []);\n  var handleClick = useCallback(function (event) {\n    if (isDisabledReactIssue7711(event.currentTarget)) return event.preventDefault();\n    if (props.disabled) return;\n\n    if (state.menuState === MenuStates.Open) {\n      dispatch({\n        type: ActionTypes.CloseMenu\n      });\n      d.nextFrame(function () {\n        var _state$buttonRef$curr;\n\n        return (_state$buttonRef$curr = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr.focus({\n          preventScroll: true\n        });\n      });\n    } else {\n      event.preventDefault();\n      event.stopPropagation();\n      dispatch({\n        type: ActionTypes.OpenMenu\n      });\n    }\n  }, [dispatch, d, state, props.disabled]);\n  var slot = useMemo(function () {\n    return {\n      open: state.menuState === MenuStates.Open\n    };\n  }, [state]);\n  var passthroughProps = props;\n  var propsWeControl = {\n    ref: buttonRef,\n    id: id,\n    type: useResolveButtonType(props, state.buttonRef),\n    'aria-haspopup': true,\n    'aria-controls': (_state$itemsRef$curre = state.itemsRef.current) == null ? void 0 : _state$itemsRef$curre.id,\n    'aria-expanded': props.disabled ? undefined : state.menuState === MenuStates.Open,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    onClick: handleClick\n  };\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_BUTTON_TAG,\n    name: 'Menu.Button'\n  });\n}); // ---\n\nvar DEFAULT_ITEMS_TAG = 'div';\nvar ItemsRenderFeatures = Features.RenderStrategy | Features.Static;\nvar Items = /*#__PURE__*/forwardRefWithAs(function Items(props, ref) {\n  var _state$items$state$ac, _state$buttonRef$curr4;\n\n  var _useMenuContext2 = useMenuContext([Menu.name, Items.name].join('.')),\n      state = _useMenuContext2[0],\n      dispatch = _useMenuContext2[1];\n\n  var itemsRef = useSyncRefs(state.itemsRef, ref);\n  var id = \"headlessui-menu-items-\" + useId();\n  var searchDisposables = useDisposables();\n  var usesOpenClosedState = useOpenClosed();\n\n  var visible = function () {\n    if (usesOpenClosedState !== null) {\n      return usesOpenClosedState === State.Open;\n    }\n\n    return state.menuState === MenuStates.Open;\n  }();\n\n  useEffect(function () {\n    var container = state.itemsRef.current;\n    if (!container) return;\n    if (state.menuState !== MenuStates.Open) return;\n    if (container === document.activeElement) return;\n    container.focus({\n      preventScroll: true\n    });\n  }, [state.menuState, state.itemsRef]);\n  useTreeWalker({\n    container: state.itemsRef.current,\n    enabled: state.menuState === MenuStates.Open,\n    accept: function accept(node) {\n      if (node.getAttribute('role') === 'menuitem') return NodeFilter.FILTER_REJECT;\n      if (node.hasAttribute('role')) return NodeFilter.FILTER_SKIP;\n      return NodeFilter.FILTER_ACCEPT;\n    },\n    walk: function walk(node) {\n      node.setAttribute('role', 'none');\n    }\n  });\n  var handleKeyDown = useCallback(function (event) {\n    searchDisposables.dispose();\n\n    switch (event.key) {\n      // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-12\n      // @ts-expect-error Fallthrough is expected here\n      case Keys.Space:\n        if (state.searchQuery !== '') {\n          event.preventDefault();\n          event.stopPropagation();\n          return dispatch({\n            type: ActionTypes.Search,\n            value: event.key\n          });\n        }\n\n      // When in type ahead mode, fallthrough\n\n      case Keys.Enter:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.CloseMenu\n        });\n\n        if (state.activeItemIndex !== null) {\n          var _document$getElementB;\n\n          var _id = state.items[state.activeItemIndex].id;\n          (_document$getElementB = document.getElementById(_id)) == null ? void 0 : _document$getElementB.click();\n        }\n\n        disposables().nextFrame(function () {\n          var _state$buttonRef$curr2;\n\n          return (_state$buttonRef$curr2 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr2.focus({\n            preventScroll: true\n          });\n        });\n        break;\n\n      case Keys.ArrowDown:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToItem,\n          focus: Focus.Next\n        });\n\n      case Keys.ArrowUp:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToItem,\n          focus: Focus.Previous\n        });\n\n      case Keys.Home:\n      case Keys.PageUp:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToItem,\n          focus: Focus.First\n        });\n\n      case Keys.End:\n      case Keys.PageDown:\n        event.preventDefault();\n        event.stopPropagation();\n        return dispatch({\n          type: ActionTypes.GoToItem,\n          focus: Focus.Last\n        });\n\n      case Keys.Escape:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: ActionTypes.CloseMenu\n        });\n        disposables().nextFrame(function () {\n          var _state$buttonRef$curr3;\n\n          return (_state$buttonRef$curr3 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr3.focus({\n            preventScroll: true\n          });\n        });\n        break;\n\n      case Keys.Tab:\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n\n      default:\n        if (event.key.length === 1) {\n          dispatch({\n            type: ActionTypes.Search,\n            value: event.key\n          });\n          searchDisposables.setTimeout(function () {\n            return dispatch({\n              type: ActionTypes.ClearSearch\n            });\n          }, 350);\n        }\n\n        break;\n    }\n  }, [dispatch, searchDisposables, state]);\n  var handleKeyUp = useCallback(function (event) {\n    switch (event.key) {\n      case Keys.Space:\n        // Required for firefox, event.preventDefault() in handleKeyDown for\n        // the Space key doesn't cancel the handleKeyUp, which in turn\n        // triggers a *click*.\n        event.preventDefault();\n        break;\n    }\n  }, []);\n  var slot = useMemo(function () {\n    return {\n      open: state.menuState === MenuStates.Open\n    };\n  }, [state]);\n  var propsWeControl = {\n    'aria-activedescendant': state.activeItemIndex === null ? undefined : (_state$items$state$ac = state.items[state.activeItemIndex]) == null ? void 0 : _state$items$state$ac.id,\n    'aria-labelledby': (_state$buttonRef$curr4 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr4.id,\n    id: id,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    role: 'menu',\n    tabIndex: 0,\n    ref: itemsRef\n  };\n  var passthroughProps = props;\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_ITEMS_TAG,\n    features: ItemsRenderFeatures,\n    visible: visible,\n    name: 'Menu.Items'\n  });\n}); // ---\n\nvar DEFAULT_ITEM_TAG = Fragment;\n\nfunction Item(props) {\n  var _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      onClick = props.onClick,\n      passthroughProps = _objectWithoutPropertiesLoose(props, [\"disabled\", \"onClick\"]);\n\n  var _useMenuContext3 = useMenuContext([Menu.name, Item.name].join('.')),\n      state = _useMenuContext3[0],\n      dispatch = _useMenuContext3[1];\n\n  var id = \"headlessui-menu-item-\" + useId();\n  var active = state.activeItemIndex !== null ? state.items[state.activeItemIndex].id === id : false;\n  useIsoMorphicEffect(function () {\n    if (state.menuState !== MenuStates.Open) return;\n    if (!active) return;\n    var d = disposables();\n    d.nextFrame(function () {\n      var _document$getElementB2;\n\n      return (_document$getElementB2 = document.getElementById(id)) == null ? void 0 : _document$getElementB2.scrollIntoView == null ? void 0 : _document$getElementB2.scrollIntoView({\n        block: 'nearest'\n      });\n    });\n    return d.dispose;\n  }, [id, active, state.menuState]);\n  var bag = useRef({\n    disabled: disabled\n  });\n  useIsoMorphicEffect(function () {\n    bag.current.disabled = disabled;\n  }, [bag, disabled]);\n  useIsoMorphicEffect(function () {\n    var _document$getElementB3, _document$getElementB4;\n\n    bag.current.textValue = (_document$getElementB3 = document.getElementById(id)) == null ? void 0 : (_document$getElementB4 = _document$getElementB3.textContent) == null ? void 0 : _document$getElementB4.toLowerCase();\n  }, [bag, id]);\n  useIsoMorphicEffect(function () {\n    dispatch({\n      type: ActionTypes.RegisterItem,\n      id: id,\n      dataRef: bag\n    });\n    return function () {\n      return dispatch({\n        type: ActionTypes.UnregisterItem,\n        id: id\n      });\n    };\n  }, [bag, id]);\n  var handleClick = useCallback(function (event) {\n    if (disabled) return event.preventDefault();\n    dispatch({\n      type: ActionTypes.CloseMenu\n    });\n    disposables().nextFrame(function () {\n      var _state$buttonRef$curr5;\n\n      return (_state$buttonRef$curr5 = state.buttonRef.current) == null ? void 0 : _state$buttonRef$curr5.focus({\n        preventScroll: true\n      });\n    });\n    if (onClick) return onClick(event);\n  }, [dispatch, state.buttonRef, disabled, onClick]);\n  var handleFocus = useCallback(function () {\n    if (disabled) return dispatch({\n      type: ActionTypes.GoToItem,\n      focus: Focus.Nothing\n    });\n    dispatch({\n      type: ActionTypes.GoToItem,\n      focus: Focus.Specific,\n      id: id\n    });\n  }, [disabled, id, dispatch]);\n  var handleMove = useCallback(function () {\n    if (disabled) return;\n    if (active) return;\n    dispatch({\n      type: ActionTypes.GoToItem,\n      focus: Focus.Specific,\n      id: id\n    });\n  }, [disabled, active, id, dispatch]);\n  var handleLeave = useCallback(function () {\n    if (disabled) return;\n    if (!active) return;\n    dispatch({\n      type: ActionTypes.GoToItem,\n      focus: Focus.Nothing\n    });\n  }, [disabled, active, dispatch]);\n  var slot = useMemo(function () {\n    return {\n      active: active,\n      disabled: disabled\n    };\n  }, [active, disabled]);\n  var propsWeControl = {\n    id: id,\n    role: 'menuitem',\n    tabIndex: disabled === true ? undefined : -1,\n    'aria-disabled': disabled === true ? true : undefined,\n    disabled: undefined,\n    onClick: handleClick,\n    onFocus: handleFocus,\n    onPointerMove: handleMove,\n    onMouseMove: handleMove,\n    onPointerLeave: handleLeave,\n    onMouseLeave: handleLeave\n  };\n  return render({\n    props: _extends({}, passthroughProps, propsWeControl),\n    slot: slot,\n    defaultTag: DEFAULT_ITEM_TAG,\n    name: 'Menu.Item'\n  });\n} // ---\n\n\nMenu.Button = Button;\nMenu.Items = Items;\nMenu.Item = Item;\n\nexport { Menu };\n"]},"metadata":{},"sourceType":"module"}